define(["exports","./../../modules/viewmanager/baseview.js","./../../modules/loading/loading.js","./../../modules/formhelper.js"],function(_exports,_baseview,_loading,_formhelper){function onSubmit(e){_loading.default.show();var view=this.closest(".view");return ApiClient.getServerConfiguration().then(function(config){config.OptimizeDatabaseOnShutdown=view.querySelector(".chkOptimizeOnShutdown").checked,config.VacuumDatabaseOnStartup=view.querySelector(".chkVacuum").checked,config.DatabaseCacheSizeMB=view.querySelector(".txtCacheSize").value,config.DatabaseAnalysisLimit=view.querySelector(".txtAnalysisLimit").value,ApiClient.updateServerConfiguration(config).then(_formhelper.default.handleConfigurationSavedResponse)}),e.preventDefault(),e.stopPropagation(),!1}function DatabaseView(view,params){_baseview.default.apply(this,arguments),view.querySelector("form").addEventListener("submit",onSubmit)}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_baseview=babelHelpers.interopRequireDefault(_baseview),_loading=babelHelpers.interopRequireDefault(_loading),_formhelper=babelHelpers.interopRequireDefault(_formhelper),Object.assign(DatabaseView.prototype,_baseview.default.prototype),DatabaseView.prototype.onResume=function(options){var view;_baseview.default.prototype.onResume.apply(this,arguments),options.refresh&&(view=this.view,ApiClient.isMinServerVersion("4.7.0.8")?(view.querySelector(".fldOptimize").classList.remove("hide"),view.querySelector(".fldAnalysisLimit").classList.remove("hide")):(view.querySelector(".fldOptimize").classList.add("hide"),view.querySelector(".fldAnalysisLimit").classList.add("hide")),ApiClient.isMinServerVersion("4.6.4.0")?view.querySelector(".fldCacheSize").classList.remove("hide"):view.querySelector(".fldCacheSize").classList.add("hide"),ApiClient.getServerConfiguration().then(function(config){view.querySelector(".chkOptimizeOnShutdown").checked=config.OptimizeDatabaseOnShutdown||!1,view.querySelector(".chkVacuum").checked=config.VacuumDatabaseOnStartup||!1,view.querySelector(".txtCacheSize").value=config.DatabaseCacheSizeMB||96,view.querySelector(".txtAnalysisLimit").value=config.DatabaseAnalysisLimit||400}))},_exports.default=DatabaseView});