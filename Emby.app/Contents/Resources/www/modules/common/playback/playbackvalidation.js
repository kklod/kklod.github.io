define(["exports","./playbackmanager.js","./../itemhelper.js"],function(_exports,_playbackmanager,_itemhelper){function validatePlayback(options){var dep,feature="playback";if(!options.item||"TvChannel"!==options.item.Type&&"Recording"!==options.item.Type||(feature="livetv"),"playback"===feature){var player=_playbackmanager.default.getCurrentPlayer();if(player&&!player.isLocalPlayer)return Promise.resolve()}return dep=["registrationServices"],new Promise(function(resolve,reject){require(dep,resolve)}).then(function(registrationServices){return registrationServices.validateFeature(feature,options).then(function(result){result&&result.enableTimeLimit&&(stopAutoStopTimer(),autoStopTimeout=setTimeout(onAutoStopTimeout,63e3))})})}var autoStopTimeout;function onAutoStopTimeout(){stopAutoStopTimer(),_playbackmanager.default.stop()}function stopAutoStopTimer(){autoStopTimeout&&(clearTimeout(autoStopTimeout),autoStopTimeout=null)}function PlaybackValidation(){this.name="Playback validation",this.type="preplayintercept",this.id="playbackvalidation",this.order=-1}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_playbackmanager=babelHelpers.interopRequireDefault(_playbackmanager),_itemhelper=babelHelpers.interopRequireDefault(_itemhelper),PlaybackValidation.prototype.intercept=function(options){return!options.fullscreen||options.item&&_itemhelper.default.isLocalItem(options.item)?Promise.resolve():validatePlayback(options)},_exports.default=PlaybackValidation});