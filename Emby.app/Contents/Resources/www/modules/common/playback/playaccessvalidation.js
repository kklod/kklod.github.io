define(["exports","./../globalize.js","./../../emby-apiclient/connectionmanager.js"],function(_exports,_globalize,_connectionmanager){function alertText(options){return dep=["alert"],new Promise(function(resolve,reject){require(dep,resolve)}).then(function(alert){return alert(options)});var dep}function PlayAccessValidation(){this.name="Playback validation",this.type="preplayintercept",this.id="playaccessvalidation",this.order=-2}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_globalize=babelHelpers.interopRequireDefault(_globalize),_connectionmanager=babelHelpers.interopRequireDefault(_connectionmanager),PlayAccessValidation.prototype.intercept=function(options){var item=options.item;if(!item)return Promise.resolve();var serverId=item.ServerId;return serverId?_connectionmanager.default.getApiClient(serverId).getCurrentUser().then(function(user){return user.Policy.EnableMediaPlayback?Promise.resolve():options.fullscreen?alertText(_globalize.default.translate("MessagePlayAccessRestricted")).then(function(){return Promise.reject()}):Promise.reject()}):Promise.resolve()},_exports.default=PlayAccessValidation});