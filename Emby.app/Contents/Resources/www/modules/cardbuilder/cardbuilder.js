define(["exports","./../emby-apiclient/connectionmanager.js","./../common/textencoding.js","./../common/globalize.js","./../common/datetime.js","./../common/itemhelper.js","./../common/playback/playbackmanager.js","./../dom.js","./../browser.js","./../focusmanager.js","./../layoutmanager.js","./../skinmanager.js","./../mediainfo/mediainfo.js","./../humanedate/humanedate.js","./../indicators/indicators.js","./../shortcuts.js","./../common/servicelocator.js","./../imageloader/imageloader.js","./../itemcontextmenu.js","./../emby-elements/userdatabuttons/emby-playstatebutton.js","./../emby-elements/userdatabuttons/emby-ratingbutton.js"],function(_exports,_connectionmanager,_textencoding,_globalize,_datetime,_itemhelper,_playbackmanager,_dom,_browser,_focusmanager,_layoutmanager,_skinmanager,_mediainfo,_humanedate,_indicators,_shortcuts,_servicelocator,_imageloader,_itemcontextmenu,_embyPlaystatebutton,_embyRatingbutton){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_connectionmanager=babelHelpers.interopRequireDefault(_connectionmanager),_textencoding=babelHelpers.interopRequireDefault(_textencoding),_globalize=babelHelpers.interopRequireDefault(_globalize),_datetime=babelHelpers.interopRequireDefault(_datetime),_itemhelper=babelHelpers.interopRequireDefault(_itemhelper),_playbackmanager=babelHelpers.interopRequireDefault(_playbackmanager),_dom=babelHelpers.interopRequireDefault(_dom),_browser=babelHelpers.interopRequireDefault(_browser),_focusmanager=babelHelpers.interopRequireDefault(_focusmanager),_layoutmanager=babelHelpers.interopRequireDefault(_layoutmanager),_skinmanager=babelHelpers.interopRequireDefault(_skinmanager),_mediainfo=babelHelpers.interopRequireDefault(_mediainfo),_humanedate=babelHelpers.interopRequireDefault(_humanedate),_indicators=babelHelpers.interopRequireDefault(_indicators),_shortcuts=babelHelpers.interopRequireDefault(_shortcuts),_imageloader=babelHelpers.interopRequireDefault(_imageloader),_itemcontextmenu=babelHelpers.interopRequireDefault(_itemcontextmenu),_embyPlaystatebutton=babelHelpers.interopRequireDefault(_embyPlaystatebutton),_embyRatingbutton=babelHelpers.interopRequireDefault(_embyRatingbutton),require(["css!modules/cardbuilder/card.css","paper-icon-button-light","programStyles","embyProgressBarStyle","emby-checkbox"]);var cores,enableFocusTransfrom=!((cores=navigator.hardwareConcurrency||4)<4)&&(!((2400<=(screen.width||screen.availWidth||0)||1400<=(screen.height||screen.availHeight||0))&&cores<6)&&(!!CSS.supports("transform","scale(1)")&&(!!_dom.default.supportsEventListenerOnce()&&!!document.documentElement.animate))),supportsNativeLazyLoading="loading"in HTMLImageElement.prototype;function getCardsHtml(items,options){return 1===arguments.length&&(items=(options=arguments[0]).items),buildCardsHtmlInternal(items,options)}supportsNativeLazyLoading=!1;var cachedWidths={};function setListOptions(items,options){options.isListItem=!0,options.imageFallback=!1!==options.imageFallback;var shape=options.shape||"auto";options.sideFooter&&(shape="banner",options.textLinks=!1),options.fields?options.fields.includes("Name")&&(options.showTitle=!0):(options.fields=[],options.showTitle&&options.fields.push("Name"),options.showYear&&options.fields.push("ProductionYear"));for(var fieldMap={},i=0,length=options.fields.length;i<length;i++)fieldMap[options.fields[i]]=!0;options.fieldMap=fieldMap,options.lines||options.overlayText||(options.lines=function(options){options.fields;var fieldMap=options.fieldMap,lines=0;return fieldMap.Name&&lines++,fieldMap.ParentNameOrName&&lines++,(fieldMap.ProductionYear||fieldMap.OfficialRating)&&lines++,(fieldMap.CommunityRating||fieldMap.CriticRating)&&lines++,fieldMap.PersonRole&&lines++,fieldMap.DateModified&&lines++,fieldMap.ChapterTime&&lines++,fieldMap.ChannelName&&lines++,fieldMap.Overview&&lines++,fieldMap.Album&&lines++,fieldMap.Type&&lines++,fieldMap.UserLastSeen&&lines++,fieldMap.Version&&lines++,fieldMap.Url&&lines++,fieldMap.InstalledVersion&&lines++,fieldMap.ItemImageName&&lines++,fieldMap.Filename&&lines++,fieldMap.FilenameOrName&&lines++,fieldMap.Resolution&&lines++,options.showParentTitle&&lines++,fieldMap.CollectionType&&lines++,fieldMap.LibraryFolders&&lines++,fieldMap.DeviceAppInfo&&lines++,fieldMap.DeviceUserInfo&&lines++,fieldMap.CurrentProgramTime&&lines++,fieldMap.CurrentProgramParentName&&lines++,fieldMap.CurrentProgramName&&lines++,fieldMap.SeriesTimerChannel&&lines++,fieldMap.SeriesTimerTime&&lines++,fieldMap.ImageEditorStandardButtons&&lines++,fieldMap.ImageEditorBackdropButtons&&lines++,options.showAirTime&&lines++,options.showDownloadableImageInfo&&(lines+=2),options.showRuntime&&lines++,lines}(options)),"auto"!==shape&&"autooverflow"!==shape||(shape=_imageloader.default.getShape(items,options)),"auto"===options.preferThumb&&(options.preferThumb="backdrop"===shape),options.uiAspect=_imageloader.default.getAspectFromShape(shape,options).aspect,!options.width&&options.widths&&(options.width=options.widths[shape]),options.rows&&"number"!=typeof options.rows&&(options.rows=options.rows[shape]);var className="card";shape&&(className+=" "+shape+"Card"),options.horizontal&&(className+=" card-horiz "+shape+"Card-horiz"),options.cardClass&&(className+=" "+options.cardClass);var isLayoutTv=_layoutmanager.default.tv;isLayoutTv||(className+=" card-hoverable");var tagName,isSingleClickElement=isLayoutTv&&!options.staticElement||!1===options.hoverMenu&&"none"!==options.action;enableFocusTransfrom&&isLayoutTv&&(className+=" card-focustransform"),options.smallSideFooter&&(className+=" smallBannerCard",options.horizontal&&(className+=" smallBannerCard-horiz")),isSingleClickElement?(tagName="button",className+=" itemAction"):(tagName="div",options.staticElement||(className+=" focusable",options.addTabIndex=!0)),_layoutmanager.default.tv?(options.draggable=!1,options.draggableSubItems=!1,options.dropTarget=!1,options.dragReorder=!1):(options.draggable=!1!==options.draggable,options.draggableSubItems=options.draggable&&!1!==options.draggableSubItems,options.dragReorder&&options.draggable?className+=" drop-target ordered-drop-target-x":options.dropTarget&&(className+=" drop-target full-drop-target"));var lineContents=[];for(options.lines&&(lineContents.length=options.lines),i=0,length=lineContents.length;i<length;i++)lineContents[i]="&nbsp;";var cardTextCssClass=options.centerText?"cardText cardTextCentered":"cardText",lines=lineContents.length?getCardTextLines(lineContents,cardTextCssClass,!options.overlayText,!0,lineContents.length):"",cardBoxClass="cardBox";(options.cardLayout||options.sideFooter)&&(cardBoxClass+=" visualCardBox"),options.sideFooter&&(cardBoxClass+=" cardBox-sideFooter",_layoutmanager.default.tv&&(cardBoxClass+=" cardBox-sideFooter-f"),options.centerText=!1),isLayoutTv&&(enableFocusTransfrom&&(cardBoxClass+=" cardBox-focustransform"),(options.cardLayout||options.sideFooter)&&(cardBoxClass+=" card-focuscontent")),isSingleClickElement||!1!==options.moreButton&&(cardBoxClass+=" cardBox-touchzoom"),!lineContents.length||options.overlayText||options.cardLayout||options.sideFooter||!1===options.allowBottomPadding||(cardBoxClass+=" cardBox-bottompadded");var cardPadderClass=[];options.sideFooter||cardPadderClass.push("cardPadder-"+shape),options.cardPadderClass&&cardPadderClass.push(options.cardPadderClass);var innerCardFooterClass=["innerCardFooter"];options.innerCardFooterClass&&innerCardFooterClass.push(options.innerCardFooterClass);var cardScalableClass="cardScalable";options.round=options.round&&"square"===shape,isSingleClickElement&&!options.cardLayout&&(cardScalableClass+=" card-focuscontent",options.round&&(cardScalableClass+=" cardFocusContent-round"));var screenWidth,cardContentClass="cardContent cardImageContainer";options.cardLayout||options.sideFooter||(cardContentClass+=" cardContent-shadow"),options.paddedImage&&(cardContentClass+=" paddedImage"),options.defaultBackground&&(cardContentClass+=" defaultCardBackground defaultCardBackground0"),options.imageClass&&(cardContentClass+=" "+options.imageClass),options.sideFooter&&(cardContentClass+=" cardImageContainer-sideFooter",options.smallSideFooter&&(cardContentClass+=" cardImageContainer-smallSideFooter")),options.round&&(cardContentClass+=" cardContent-round"),enableFocusTransfrom&&isLayoutTv||options.sideFooter||(isSingleClickElement||options.action,cardContentClass+=isLayoutTv?" cardContent-bxsborder":" cardContent-bxsborder-fv"),options.width||(screenWidth=_dom.default.getWindowSize().innerWidth,options.width=function(cardClass,cardBoxClass,cardContentClass,options,screenWidth){options.sideFooter&&(cardClass+=" withsidefooter"),options.imageWidthTestClass&&(cardClass+=" "+options.imageWidthTestClass);var key=cardClass+screenWidth,width=cachedWidths[key];if(width)return width;console.log("getImageWidth: "+key);var div=document.createElement("div");div.className="itemsContainer padded-left padded-right",_layoutmanager.default.tv&&div.classList.add("itemsContainer-tv"),div.style.visibility="hidden",options.sideFooter?div.innerHTML='<div class="'+cardClass+'"><div class="'+cardBoxClass+'"><div class="'+cardContentClass+'"></div></div></div>':div.innerHTML='<div class="'+cardClass+'"><div class="'+cardBoxClass+' cardScalable"></div></div>';var parent=document.body;return parent.appendChild(div),width=options.sideFooter?cachedWidths[key]=div.querySelector(".cardImageContainer").offsetWidth||400:cachedWidths[key]=div.querySelector(".cardScalable").offsetWidth||400,parent.removeChild(div),console.log("width: "+width),width}(className,cardBoxClass,cardContentClass,options,screenWidth),function(windowWidth){var screen=window.screen;if(screen&&20<screen.availWidth-windowWidth)return 1}(screenWidth)&&(options.width=50*Math.ceil(options.width/50)));var innerHTML='<div class="'+cardBoxClass+'">',cardPadderClass=cardPadderClass.join(" "),innerCardFooterClass=innerCardFooterClass.join(" ");isSingleClickElement||"none"===options.action?innerHTML+='<div class="'+cardContentClass+" "+cardScalableClass+" "+cardPadderClass+'"></div>':innerHTML+='<button type="button" tabindex="-1" class="cardContent-button '+cardContentClass+" "+cardScalableClass+" "+cardPadderClass+'"></button>',innerHTML+=lines+"</div>",null==options.defaultIcon&&(options.sideFooter||options.lines||fieldMap.Name?options.defaultIcon=!0:options.defaultIcon=!1),options.moreTitle=_globalize.default.translate("More"),options.multiSelectTitle=_globalize.default.translate("MultiSelect"),options.multiSelect=!1!==options.multiSelect&&!_layoutmanager.default.tv,options.contextMenu=!1!==options.contextMenu,options.enableUserData=!1!==options.enableUserData;var fixedAttributes="";options.addTabIndex&&(fixedAttributes+=' tabindex="0"'),options.draggable&&(fixedAttributes+=' draggable="true"'),options.fixedAttributes=fixedAttributes.trim(),options.templateInnerHTML=innerHTML,options.cardPadderClass=cardPadderClass,options.innerCardFooterClass=innerCardFooterClass,options.cardScalableClass=cardScalableClass,options.tagName=tagName,options.shape=shape,options.className=className,options.isSingleClickElement=isSingleClickElement,options.cardContentClass=cardContentClass,options.cardBoxClass=cardBoxClass}function buildCardsHtmlInternal(items,options){setListOptions(items,options);for(var hasOpenRow,html="",itemsInRow=0,rows=options.rows,i=0,length=items.length;i<length;i++){rows&&0===itemsInRow&&(hasOpenRow&&(html+="</div>",hasOpenRow=!1),html+='<div class="cardColumn">',hasOpenRow=!0),html+=getCardHtml(items[i],i,options),itemsInRow++,rows&&rows<=itemsInRow&&(html+="</div>",hasOpenRow=!1,itemsInRow=0)}return hasOpenRow&&(html+="</div>"),html}function getImageUrl(item,apiClient,options,shape){var imgUrl,width=options.width;if(item.ImageUrl)return imgUrl=item.ImageUrl,options.addImageSizeToUrl&&options.width&&(imgUrl+="&maxWidth="+width),{imgUrl:imgUrl,aspect:item.PrimaryImageAspectRatio};var imageAspect,height=null,primaryImageAspectRatio=item.PrimaryImageAspectRatio,forceName=!1,imageTags=item.ImageTags,uiAspect=options.uiAspect;return options.preferThumb&&imageTags&&imageTags.Thumb?(imgUrl=apiClient.getImageUrl(item.Id,{type:"Thumb",maxWidth:width,tag:imageTags.Thumb}),imageAspect=16/9):(options.preferBanner||"banner"===shape)&&imageTags&&imageTags.Banner?(imgUrl=apiClient.getImageUrl(item.Id,{type:"Banner",maxWidth:width,tag:imageTags.Banner}),imageAspect=1e3/185):options.preferDisc&&imageTags&&imageTags.Disc?(imgUrl=apiClient.getImageUrl(item.Id,{type:"Disc",maxWidth:width,tag:imageTags.Disc}),imageAspect=1):options.preferLogo&&imageTags&&imageTags.Logo?(imgUrl=apiClient.getImageUrl(item.Id,{type:"Logo",maxWidth:width,tag:imageTags.Logo}),imageAspect=16/9):options.preferLogo&&item.ParentLogoImageTag&&item.ParentLogoItemId?(imgUrl=apiClient.getImageUrl(item.ParentLogoItemId,{type:"Logo",maxWidth:width,tag:item.ParentLogoImageTag}),imageAspect=16/9):options.showChannelLogo&&item.ChannelPrimaryImageTag&&item.ChannelId?(imgUrl=apiClient.getImageUrl(item.ChannelId,{type:"Primary",maxWidth:width,tag:item.ChannelPrimaryImageTag}),imageAspect=16/9):options.preferThumb&&item.ParentThumbItemId&&!1!==options.inheritThumb&&"Photo"!==item.MediaType?(imgUrl=apiClient.getImageUrl(item.ParentThumbItemId,{type:"Thumb",maxWidth:width,tag:item.ParentThumbImageTag}),imageAspect=16/9):options.preferThumb&&item.BackdropImageTags&&item.BackdropImageTags.length?(imgUrl=apiClient.getImageUrl(item.Id,{type:"Backdrop",maxWidth:width,tag:item.BackdropImageTags[0]}),forceName=!0,imageAspect=16/9):options.preferThumb&&item.ParentBackdropImageTags&&item.ParentBackdropImageTags.length&&!1!==options.inheritThumb&&"Episode"===item.Type?(imgUrl=apiClient.getImageUrl(item.ParentBackdropItemId,{type:"Backdrop",maxWidth:width,tag:item.ParentBackdropImageTags[0]}),options.preferThumb&&(forceName=!0),imageAspect=16/9):imageTags&&imageTags.Primary?(height=width&&uiAspect?Math.round(width/uiAspect):null,imgUrl="TvChannel"===item.Type||"ChannelManagementInfo"===item.Type?apiClient.getLogoImageUrl(item,{maxHeight:height,maxWidth:width},_skinmanager.default.getPreferredLogoImageTypes()):apiClient.getImageUrl(item.Id,{type:"Primary",maxHeight:height,maxWidth:width,tag:imageTags.Primary}),options.preferThumb&&(forceName=!0),imageAspect=primaryImageAspectRatio):options.backdropAsSecondary&&item.ParentBackdropImageTags&&item.ParentBackdropImageTags.length?(imgUrl=apiClient.getImageUrl(item.ParentBackdropItemId,{type:"Backdrop",maxWidth:width,tag:item.ParentBackdropImageTags[0]}),options.preferBackdrop&&(forceName=!0),imageAspect=16/9):item.ImageTag&&"Plugin"===item.Type?(imgUrl=apiClient.getUrl("Plugins/"+item.Id+"/Thumb",{maxHeight:height,maxWidth:width,tag:item.ImageTag}),imageAspect=16/9):item.ImageTag&&null!=item.ChapterIndex?(imgUrl=apiClient.getImageUrl(item.Id,{maxWidth:width,tag:item.ImageTag,type:"Chapter",index:item.ChapterIndex}),imageAspect=primaryImageAspectRatio):item.PrimaryImageTag?(height=width&&uiAspect?Math.round(width/uiAspect):null,"User"===item.Type?imgUrl=apiClient.getUserImageUrl(item.Id,{maxHeight:height,maxWidth:width,tag:item.PrimaryImageTag,type:"Primary"}):(imgUrl=apiClient.getImageUrl(item.PrimaryImageItemId||item.Id||item.ItemId,{type:"Primary",maxHeight:height,maxWidth:width,tag:item.PrimaryImageTag}),options.preferThumb&&(forceName=!0)),imageAspect=primaryImageAspectRatio):item.AlbumId&&item.AlbumPrimaryImageTag?(height=width&&uiAspect?Math.round(width/uiAspect):null,imgUrl=apiClient.getImageUrl(item.AlbumId,{type:"Primary",maxHeight:height,maxWidth:width,tag:item.AlbumPrimaryImageTag}),imageAspect=1):item.ParentThumbItemId&&!1!==options.inheritThumb&&uiAspect&&1.4<=uiAspect&&"Photo"!==item.MediaType?(imgUrl=apiClient.getImageUrl(item.ParentThumbItemId,{type:"Thumb",maxWidth:width,tag:item.ParentThumbImageTag}),imageAspect=16/9):item.ParentPrimaryImageTag?(imgUrl=apiClient.getImageUrl(item.ParentPrimaryImageItemId,{type:"Primary",maxWidth:width,tag:item.ParentPrimaryImageTag}),imageAspect="Episode"===item.Type?2/3:1):item.ChannelPrimaryImageTag&&item.ChannelId?(imgUrl=apiClient.getImageUrl(item.ChannelId,{type:"Primary",maxWidth:width,tag:item.ChannelPrimaryImageTag}),imageAspect=16/9):item.SeriesPrimaryImageTag?(imgUrl=apiClient.getImageUrl(item.SeriesId,{type:"Primary",maxWidth:width,tag:item.SeriesPrimaryImageTag}),imageAspect=2/3):"Season"===item.Type&&imageTags&&imageTags.Thumb?(imgUrl=apiClient.getImageUrl(item.Id,{type:"Thumb",maxWidth:width,tag:imageTags.Thumb}),imageAspect=16/9):item.BackdropImageTags&&item.BackdropImageTags.length?(imgUrl=apiClient.getImageUrl(item.Id,{type:"Backdrop",maxWidth:width,tag:item.BackdropImageTags[0]}),imageAspect=16/9):imageTags&&imageTags.Thumb?(imgUrl=apiClient.getImageUrl(item.Id,{type:"Thumb",maxWidth:width,tag:imageTags.Thumb}),imageAspect=16/9):item.ParentThumbItemId&&!1!==options.inheritThumb?(imgUrl=apiClient.getImageUrl(item.ParentThumbItemId,{type:"Thumb",maxWidth:width,tag:item.ParentThumbImageTag}),imageAspect=16/9):item.ParentBackdropImageTags&&item.ParentBackdropImageTags.length&&!1!==options.inheritThumb?(imgUrl=apiClient.getImageUrl(item.ParentBackdropItemId,{type:"Backdrop",maxWidth:width,tag:item.ParentBackdropImageTags[0]}),imageAspect=16/9):item.PrimaryImageItemId?(imgUrl=apiClient.getImageUrl(item.PrimaryImageItemId,{type:"Primary",maxHeight:height,maxWidth:width}),imageAspect=primaryImageAspectRatio):item.UserPrimaryImageTag&&(imgUrl=apiClient.getUserImageUrl(item.UserId,{maxHeight:height,maxWidth:width,tag:item.UserPrimaryImageTag,type:"Primary"}),imageAspect=1),{imgUrl:imgUrl,forceName:forceName,aspect:imageAspect}}var refreshIndicatorLoaded,numRandomColors=5;function getDefaultColorIndex(str){if(str){for(var charIndex=Math.floor(str.length/2),character=String(str.substr(charIndex,1).charCodeAt()),sum=0,i=0;i<character.length;i++)sum+=parseInt(character.charAt(i));return String(sum).substr(-1)%numRandomColors+1}return min=1,max=numRandomColors,Math.floor(Math.random()*(max-min+1))+min;var min,max}function getCardTextLines(lines,cssClass,forceLines,isOuterFooter,maxLines){for(var html="",valid=0,currentCssClass=cssClass,i=0,length=lines.length;i<length;i++){currentCssClass=cssClass;var text=lines[i];if(0<valid&&isOuterFooter?currentCssClass+=" cardText-secondary":0===valid&&isOuterFooter&&(currentCssClass+=" cardText-first"),text&&(html+='<div class="'+currentCssClass+'">',html+=text,html+="</div>",valid++,maxLines&&maxLines<=valid))break}if(forceLines)for(length=maxLines||Math.min(lines.length,maxLines||lines.length);valid<length;)currentCssClass=cssClass,0<valid&&isOuterFooter&&(currentCssClass+=" cardText-secondary"),html+='<div class="'+currentCssClass+'">&nbsp;</div>',valid++;return html}function isUsingLiveTvNaming(itemType){return"Program"===itemType||"Timer"===itemType||"Recording"===itemType}function getAirTimeText(item,showAirDateTime,showAirEndTime){var airTimeText="";if(item.StartDate)try{var date=_datetime.default.parseISO8601Date(item.StartDate);showAirDateTime&&(airTimeText+=_datetime.default.toLocaleDateString(date,{weekday:"short",month:"short",day:"numeric"})+" "),airTimeText+=_datetime.default.getDisplayTime(date),item.EndDate&&showAirEndTime&&(date=_datetime.default.parseISO8601Date(item.EndDate),airTimeText+=" &ndash; "+_datetime.default.getDisplayTime(date))}catch(e){console.log("Error parsing date: "+item.StartDate)}return airTimeText}function getCardFooterText(item,options,showTitle,forceName,overlayText,imgUrl,footerClass,progressHtml,logoUrl,isOuterFooter){var itemType=item.Type,html="";logoUrl&&(html+='<div class="lazy cardFooterLogo" loading="lazy" style="background-image:url('+logoUrl+');"></div>');var titleAdded,parentTitle,showOtherText=isOuterFooter?!overlayText:overlayText,cssClass=options.centerText?"cardText cardTextCentered":"cardText",lines=[],parentTitleUnderneath="MusicAlbum"===itemType||"Audio"===itemType||"MusicVideo"===itemType||"Game"===itemType,serverId=item.ServerId||options.serverId,fieldMap=options.fieldMap;showOtherText&&(options.showParentTitle||fieldMap.ParentNameOrName||forceName&&options.seriesNameInPlaceHolderName)&&!parentTitleUnderneath&&(isOuterFooter&&"Episode"===itemType&&item.SeriesName?item.SeriesId?lines.push(getTextActionButton(options,{Id:item.SeriesId,ServerId:serverId,Name:item.SeriesName,Type:"Series",IsFolder:!0})):lines.push(_textencoding.default.htmlEncode(item.SeriesName)):isUsingLiveTvNaming(itemType)?(lines.push(_textencoding.default.htmlEncode(item.Name)),item.EpisodeTitle||(titleAdded=!0)):((parentTitle=item.SeriesName||item.Series||item.Album||(item.AlbumArtist?item.AlbumArtist.Name||item.AlbumArtist:null)||item.GameSystem||"")||showTitle)&&lines.push(_textencoding.default.htmlEncode(parentTitle)));var name,showMediaTitle=showTitle&&!titleAdded||fieldMap.ParentNameOrName&&!lines.length;if(showMediaTitle||titleAdded||!(showTitle||forceName&&!options.seriesNameInPlaceHolderName)||(showMediaTitle=!0),!showMediaTitle||(name=_itemhelper.default.getDisplayName(item,{includeParentInfo:options.includeParentInfoInTitle,channelNumberFirst:options.channelNumberFirst}))&&(overlayText?lines.push(_textencoding.default.htmlEncode(name)):lines.push(getTextActionButton(options,item,name,serverId,options.parentId,!0))),fieldMap.Type&&lines.push(_itemhelper.default.getItemTypeName(item.Type)),showOtherText){if(options.showParentTitle&&parentTitleUnderneath&&(isOuterFooter&&item.AlbumArtists&&item.AlbumArtists.length&&"MusicAlbum"===itemType?(item.AlbumArtists[0].Type="MusicArtist",item.AlbumArtists[0].IsFolder=!0,lines.push(getTextActionButton(options,item.AlbumArtists[0],null,serverId))):isOuterFooter&&item.ArtistItems&&item.ArtistItems.length?(item.ArtistItems[0].Type="MusicArtist",item.ArtistItems[0].IsFolder=!0,lines.push(getTextActionButton(options,item.ArtistItems[0],null,serverId))):isOuterFooter&&item.AlbumArtists&&item.AlbumArtists.length?(item.AlbumArtists[0].Type="MusicArtist",item.AlbumArtists[0].IsFolder=!0,lines.push(getTextActionButton(options,item.AlbumArtists[0],null,serverId))):isOuterFooter&&item.GameSystem&&item.GameSystemId?lines.push(getTextActionButton(options,{Id:item.GameSystemId,ServerId:serverId,Name:item.GameSystem,Type:"GameSystem",IsFolder:!0})):lines.push(_textencoding.default.htmlEncode(isUsingLiveTvNaming(itemType)?item.Name:item.SeriesName||item.Series||item.Album||(item.AlbumArtist?item.AlbumArtist.Name||item.AlbumArtist:null)||item.GameSystem||""))),options.textLines)for(var additionalLines=options.textLines(item),i=0,length=additionalLines.length;i<length;i++)lines.push(additionalLines[i]);fieldMap.Album&&lines.push(item.Album||"");options.fields;var showCommunityRating=fieldMap.CommunityRating,showCriticRating=fieldMap.CriticRating;(showCommunityRating||showCriticRating)&&(lineParts=[],showCommunityRating&&item.CommunityRating&&lineParts.push(_mediainfo.default.getCommunityRating(item,{outerClass:"cardMediaInfoItem"})),showCriticRating&&item.CriticRating&&lineParts.push(_mediainfo.default.getCriticRating(item,{outerClass:"cardMediaInfoItem"})),lines.push(lineParts.join("")));var endYear,lineParts,deviceHtml,showYear=fieldMap.ProductionYear,showParentalRating=fieldMap.OfficialRating;(showYear||showParentalRating)&&(lineParts=[],showYear&&("Series"===itemType?"Continuing"===item.Status?lineParts.push(_globalize.default.translate("SeriesYearToPresent",item.ProductionYear||"")):(endYear=item.EndDate?_datetime.default.parseISO8601Date(item.EndDate).getFullYear():null)&&item.ProductionYear&&endYear!==item.ProductionYear?lineParts.push(item.ProductionYear+" &ndash; "+endYear):item.ProductionYear&&lineParts.push(item.ProductionYear):item.ProductionYear&&lineParts.push(item.ProductionYear)),showParentalRating&&item.OfficialRating&&lineParts.push(item.OfficialRating),lines.push(lineParts.join("&nbsp; "))),options.showRuntime&&(item.RunTimeTicks?lines.push(_datetime.default.getDisplayRunningTime(item.RunTimeTicks)):lines.push("")),options.showAirTime&&lines.push(getAirTimeText(item,options.showAirDateTime,options.showAirEndTime)||""),fieldMap.ChannelName&&(item.ChannelId?lines.push(getTextActionButton(options,{Id:item.ChannelId,ServerId:serverId,Name:item.ChannelName,Type:"TvChannel",MediaType:item.MediaType,IsFolder:!1},item.ChannelName)):lines.push(item.ChannelName||"&nbsp;")),fieldMap.CurrentProgramParentName&&(item.CurrentProgram?lines.push(item.CurrentProgram.Name||""):lines.push("")),fieldMap.CurrentProgramName&&(item.CurrentProgram?lines.push(item.CurrentProgram.EpisodeTitle||""):lines.push(item.Name||"")),fieldMap.CurrentProgramTime&&(item.CurrentProgram?lines.push(getAirTimeText(item.CurrentProgram,!1,!0)||""):lines.push("")),fieldMap.SeriesTimerTime&&(item.RecordAnyTime?lines.push(_globalize.default.translate("Anytime")):lines.push(_datetime.default.getDisplayTime(item.StartDate))),fieldMap.SeriesTimerChannel&&(item.RecordAnyChannel?lines.push(_globalize.default.translate("AllChannels")):lines.push(item.ChannelName||_globalize.default.translate("OneChannel"))),fieldMap.PersonRole&&(item.Role?lines.push(_globalize.default.translate("ActorAsRole",item.Role)):item.PersonType?lines.push(_globalize.default.translate(item.PersonType)):lines.push("")),fieldMap.ChapterTime&&lines.push(_datetime.default.getDisplayRunningTime(item.StartPositionTicks)),fieldMap.UserLastSeen&&(item.Policy.IsDisabled?lines.push(_globalize.default.translate("Disabled")):lines.push(item.LastActivityDate?(0,_humanedate.default)(item.LastActivityDate):"")),fieldMap.Url&&lines.push(item.Url||""),fieldMap.Version&&lines.push(item.Version||""),fieldMap.CollectionType&&(item.Id?lines.push(_itemhelper.default.getContentTypeName(item.CollectionType)):lines.push("")),fieldMap.LibraryFolders&&(item.Locations&&"boxsets"!==item.CollectionType?1===item.Locations.length?lines.push(item.Locations[0]):lines.push(_globalize.default.translate("NumLocationsValue",item.Locations.length)):lines.push("")),fieldMap.DeviceAppInfo&&lines.push(item.AppName+" "+item.AppVersion),fieldMap.InstalledVersion&&(item.InstalledVersion?lines.push(_globalize.default.translate("LabelVersionInstalled",item.InstalledVersion)):lines.push("")),fieldMap.InstalledVersion&&lines.push(item.Version||""),fieldMap.ItemImageName&&(item.ImageTag?lines.push(item.Name):lines.push("&nbsp;")),fieldMap.Filename&&lines.push(item.Filename),fieldMap.FilenameOrName&&lines.push(_textencoding.default.htmlEncode(item.Filename||item.Name||"")),fieldMap.Overview&&lines.push(_textencoding.default.htmlEncode(item.Overview||"")),fieldMap.Resolution&&(item.Width&&item.Height?lines.push(item.Width+"x"+item.Height):lines.push("&nbsp;")),options.showDownloadableImageInfo&&(lines.push(function(item){var text="",lang=item.DisplayLanguage||item.Language;return item.Width&&item.Height?(text+=item.Width+"x"+item.Height,lang&&(text+=" - "+lang)):lang&&(text+=lang),text}(item)||""),lines.push(function(item){var text;return"Likes"===item.RatingType?text=1===item.CommunityRating?_globalize.default.translate("OneLike"):_globalize.default.translate("LikeCountValue",item.CommunityRating):item.CommunityRating?(text=item.CommunityRating.toFixed(1),item.VoteCount&&(text+=" - "+(1===item.VoteCount?_globalize.default.translate("OneVote"):_globalize.default.translate("VoteCountValue",item.VoteCount)))):text=_globalize.default.translate("Unrated"),text}(item)||"")),fieldMap.DateModified&&lines.push(_datetime.default.toLocaleString(_datetime.default.parseISO8601Date(item.DateModified,!0))),fieldMap.DeviceUserInfo&&(deviceHtml="",item.LastUserName&&(item.LastUserId?deviceHtml+=getTextActionButton(options,{Id:item.LastUserId,Name:item.LastUserName,ServerId:serverId,Type:"User"},item.LastUserName+", "+(0,_humanedate.default)(item.DateLastActivity),null,null):item.LastUserName&&(deviceHtml+=item.LastUserName+", "+(0,_humanedate.default)(item.DateLastActivity))),lines.push(deviceHtml)),fieldMap.MediaStreamInfo&&_mediainfo.default.pushMediaStreamLines(item,options,lines,getDefaultIcon(item)),fieldMap.ImageEditorStandardButtons&&lines.push(function(item){var searchText,html="";return item.Providers.length&&(html+='<button type="button" is="paper-icon-button-light" class="itemAction" data-action="searchimageproviders" title="'+(searchText=item.ImageTag?_globalize.default.translate("HeaderSearchNewImage"):_globalize.default.translate("HeaderSearchForAnImage"))+'" aria-label="'+searchText+'"><i class="md-icon">search</i></button>'),item.ImageTag||(html+='<button type="button" is="paper-icon-button-light" class="itemAction" data-action="addimage" title="'+_globalize.default.translate("HeaderSelectImageFile")+'" aria-label="'+_globalize.default.translate("HeaderSelectImageFile")+'"><i class="md-icon">add_circle_outline</i></button>'),item.ImageTag&&(html+='<button type="button" is="paper-icon-button-light" class="itemAction" data-action="delete" title="'+_globalize.default.translate("Delete")+'" aria-label="'+_globalize.default.translate("Delete")+'"><i class="md-icon">delete</i></button>'),html}(item)),fieldMap.ImageEditorBackdropButtons&&lines.push(function(){var html="";return html+='<button type="button" is="paper-icon-button-light" class="itemAction" data-action="delete" title="'+_globalize.default.translate("Delete")+'" aria-label="'+_globalize.default.translate("Delete")+'"><i class="md-icon">delete</i></button>'}())}return(showTitle||!imgUrl)&&forceName&&overlayText&&1===lines.length&&(lines=[]),html+=getCardTextLines(lines,cssClass,!overlayText,isOuterFooter,options.lines),progressHtml&&(html+=progressHtml),html&&(isOuterFooter&&!logoUrl&&!options.cardLayout||(html='<div class="'+footerClass+'">'+html,html+="</div>")),html}function getTextActionButton(options,item,text,serverId,parentId,isSameItemAsCard){if(text=text||_itemhelper.default.getDisplayName(item),_layoutmanager.default.tv)return _textencoding.default.htmlEncode(text);if(!1===options.textLinks)return _textencoding.default.htmlEncode(text);var html='<button tabindex="-1" title="'+(text=_textencoding.default.htmlEncode(text))+'" '+(isSameItemAsCard?"":_shortcuts.default.getShortcutAttributesHtml(item,{serverId:serverId,parentId:parentId,isListItem:options.isListItem&&isSameItemAsCard}))+' type="button"'+(options.draggable&&options.draggableSubItems&&!isSameItemAsCard?' draggable="true"':"")+' class="itemAction textActionButton cardTextActionButton emby-button button-link" data-action="link">';return html+=text,html+="</button>"}function getCardHtml(item,index,options){var itemType=item.Type,action=options.action||"link";item.IsFolder&&"play"===action?action="link":"Photo"===item.MediaType?action="playallfromhere":"AddServer"!==itemType&&"EmbyConnect"!==itemType&&"Downloads"!==itemType||(action="link");var imgInfo,shape=options.shape,isSingleClickElement=options.isSingleClickElement,serverId=item.ServerId||options.serverId,apiClient=serverId?_connectionmanager.default.getApiClient(serverId):null,imageItem=options.showCurrentProgramImage?item.CurrentProgram||item:item.ProgramInfo||item;!1===options.image?imgInfo={}:(imgInfo=getImageUrl(imageItem,apiClient,options,shape)).imgUrl||imageItem===item||(imgInfo=getImageUrl(imageItem=item,apiClient,options,shape));var imgUrl=imgInfo.imgUrl,forceName=imgInfo.forceName,overlayText=options.overlayText;forceName&&!options.cardLayout&&null==overlayText&&(overlayText=!0);var showTitle=options.fieldMap.Name||overlayText&&("PhotoAlbum"===itemType||"Folder"===itemType),cardContentClass=options.cardContentClass,coveredImageClass=_imageloader.default.getCoveredImageClass(imageItem,imgInfo.aspect,options.uiAspect,options.coverImage);coveredImageClass&&(cardContentClass+=coveredImageClass),item.Policy&&item.Policy.IsDisabled&&(cardContentClass+=" grayscaleImage"),options.defaultBackground||imgUrl||(!1===options.randomDefaultBackground?cardContentClass+=" defaultCardBackground defaultCardBackground0":cardContentClass+=" "+("defaultCardBackground defaultCardBackground"+getDefaultColorIndex(item.Name)));var roundEligible="MusicArtist"===itemType&&"square"===shape,addRoundClasses=(options.round,!options.round&&roundEligible);addRoundClasses&&(cardContentClass+=" cardContent-round");var footerCssClass,cardBoxClass=options.cardBoxClass;options.playQueueIndicator&&item.PlaylistItemId&&(_playbackmanager.default.currentItem()||{}).PlaylistItemId===item.PlaylistItemId&&(cardBoxClass+=" activePlaylistCardBox");var logoUrl,progressHtml=!1===options.progress?null:_indicators.default.getProgressBarHtml(item),innerCardFooter="",footerOverlayed=!1;options.showChannelLogo&&item.ChannelPrimaryImageTag&&(logoUrl=apiClient.getImageUrl(item.ChannelId,{type:"Primary",height:40,tag:item.ChannelPrimaryImageTag})),overlayText?(logoUrl=null,innerCardFooter+=getCardFooterText(item,options,showTitle,forceName,overlayText,imgUrl,footerCssClass=options.innerCardFooterClass,progressHtml,logoUrl,!1),footerOverlayed=!0):progressHtml&&(innerCardFooter+='<div class="'+options.innerCardFooterClass+'">',innerCardFooter+=progressHtml,innerCardFooter+="</div>",progressHtml="");var cardImageContainerOpen,outerCardFooter="";overlayText||footerOverlayed||(footerCssClass=options.cardLayout?"cardFooter":"cardFooter cardFooter-transparent",logoUrl&&(footerCssClass+=" cardFooter-withlogo"),options.cardLayout||(logoUrl=null),outerCardFooter=getCardFooterText(item,options,showTitle,forceName,overlayText,imgUrl,footerCssClass,progressHtml,logoUrl,!0),options.sideFooter&&(outerCardFooter='<div class="cardFooterContent itemAction" data-action="'+action+'">'+outerCardFooter+"</div>"));var syncPercent,refreshClass,additionalCardContent,cardImageContainerClose="",cardScalableClass=options.cardScalableClass;if(addRoundClasses&&(cardScalableClass+=" cardFocusContent-round"),options.sideFooter||(cardContentClass+=" "+cardScalableClass+" "+options.cardPadderClass),cardImageContainerClose=isSingleClickElement?(cardImageContainerOpen=imgUrl?2===options.lazy?'<div class="'+cardContentClass+'" style="background-image:url('+imgUrl+');">':supportsNativeLazyLoading?'<div class="'+cardContentClass+'" loading="lazy" style="background-image:url('+imgUrl+');">':'<div class="'+cardContentClass+' lazy" style="background-image:url('+imgUrl+');">':'<div class="'+cardContentClass+'">',"</div>"):"none"===action?(cardImageContainerOpen=imgUrl?2===options.lazy?'<div data-action="'+action+'" class="itemAction '+cardContentClass+'" style="background-image:url('+imgUrl+');">':supportsNativeLazyLoading?'<div data-action="'+action+'" class="itemAction '+cardContentClass+'" loading="lazy" style="background-image:url('+imgUrl+');">':'<div data-action="'+action+'" class="itemAction lazy '+cardContentClass+'" style="background-image:url('+imgUrl+');">':'<div data-action="'+action+'" class="'+cardContentClass+' itemAction">',"</div>"):(cardImageContainerOpen=imgUrl?2===options.lazy?'<button type="button" data-action="'+action+'" tabindex="-1" class="itemAction cardContent-button '+cardContentClass+'" style="background-image:url('+imgUrl+');">':supportsNativeLazyLoading?'<button type="button" data-action="'+action+'" tabindex="-1" class="itemAction cardContent-button '+cardContentClass+'" loading="lazy" style="background-image:url('+imgUrl+');">':'<button type="button" data-action="'+action+'" tabindex="-1" class="itemAction cardContent-button lazy '+cardContentClass+'" style="background-image:url('+imgUrl+');">':'<button type="button" data-action="'+action+'" tabindex="-1" class="cardContent-button '+cardContentClass+' itemAction">',"</button>"),cardImageContainerOpen='<div class="'+cardBoxClass+'">'+cardImageContainerOpen,options.typeIndicator&&("Video"===itemType?cardImageContainerOpen+='<i class="md-icon cardIndicator cardIndicatorIcon">&#xE04B;</i>':"Folder"===itemType||"PhotoAlbum"===itemType?cardImageContainerOpen+='<i class="md-icon cardIndicator cardIndicatorIcon">&#xE2C7;</i>':"Photo"===itemType&&(cardImageContainerOpen+='<i class="md-icon cardIndicator cardIndicatorIcon">&#xE410;</i>')),!1!==options.missingIndicator&&(cardImageContainerOpen+=_indicators.default.getMissingIndicator(item,"cardIndicator cardMissingIndicator")),!1!==options.syncIndicator&&(100===(syncPercent=item.SyncPercent)?cardImageContainerOpen+='<i class="cardIndicator md-icon cardSyncIndicator syncIndicator fullSyncIndicator">&#xf090;</i>':null!=syncPercent&&(cardImageContainerOpen+='<i class="cardIndicator md-icon cardSyncIndicator syncIndicator emptySyncIndicator">&#xf090;</i>')),!1!==options.playedIndicator&&(cardImageContainerOpen+=_indicators.default.getPlayedIndicatorHtml(item,"cardIndicator card")),!1!==options.timerIndicator&&(cardImageContainerOpen+=_indicators.default.getTimerIndicator(item,"cardIndicator card")),"CollectionFolder"===itemType||item.CollectionType?(refreshClass=item.RefreshProgress?"":"hide",options.sideFooter&&(refreshClass+=" cardRefreshIndicator-sideFooter"),cardImageContainerOpen+='<div is="emby-itemrefreshindicator" class="'+refreshClass.trim()+'" data-progress="'+(item.RefreshProgress||0)+'" data-status="'+item.RefreshStatus+'"></div>',refreshIndicatorLoaded||(refreshIndicatorLoaded=!0,require(["emby-itemrefreshindicator"]))):"User"===itemType&&item.ConnectLinkType&&(cardImageContainerOpen+='<i class="md-icon cardPlayedIndicator cardIndicator playedIndicator" title="'+_globalize.default.translate("LinkedToEmbyConnect")+'">cloud</i>'),!imgUrl&&options.imageFallback&&(cardImageContainerOpen+=function(item,options){if(null!=options.defaultTextContent)return'<div class="cardText cardDefaultText">'+options.defaultTextContent+"</div>";if("ItemImage"===item.Type)return'<h2 class="cardText cardDefaultText secondaryText">'+item.Name+"</h2>";var icon=item.Icon||getDefaultIcon(item,options);if(icon)return options.smallSideFooter?'<i class="cardImageIcon cardImageIcon-sideFooter cardImageIcon-smallSideFooter md-icon">'+icon+"</i>":options.sideFooter?'<i class="cardImageIcon cardImageIcon-sideFooter md-icon">'+icon+"</i>":'<i class="cardImageIcon cardImageIcon-center md-icon">'+icon+"</i>";return'<div class="cardText cardDefaultText">'+(isUsingLiveTvNaming(item.Type)?item.Name:_itemhelper.default.getDisplayName(item,{includeParentInfo:options.includeParentInfoInTitle,channelNumberFirst:options.channelNumberFirst}))+"</div>"}(item,options)),additionalCardContent=_layoutmanager.default.tv||!1===options.hoverMenu?"":function(item,action,options,menuClass){var html="",hasContent=!1;html+='<div class="cardOverlayContainer itemAction '+menuClass+' cardPadder-margin" data-action="'+action+'">';var btnCssClass="cardOverlayButton cardOverlayButton-hover itemAction",itemType=(item.ServerId||options.serverId,item.Type);item.Id;options.multiSelect&&(hasContent=!0,html+='<label tabindex="-1" title="'+options.multiSelectTitle+'" aria-label="'+options.multiSelectTitle+'" data-action="multiselect" class="chkItemSelectContainer chkCardSelectContainer cardOverlayButton cardOverlayButton-hover itemAction emby-checkbox-label"><input tabindex="-1" class="chkItemSelect chkCardSelect emby-checkbox  emby-checkbox-notext" is="emby-checkbox" type="checkbox" data-classes="true" /><span class="checkboxLabel chkCardSelect-checkboxLabel"></span></label>');{var playButtonAction;!1!==options.hoverPlayButton&&_playbackmanager.default.canPlay(item)&&(hasContent=!0,playButtonAction=item.IsFolder?"resume":options.playAction||"play",html+='<button tabindex="-1" type="button" is="paper-icon-button-light" class="paper-icon-button-light '+btnCssClass+' cardOverlayFab-primary md-icon cardOverlayButtonIcon" data-action="'+playButtonAction+'">&#xE037;</button>')}options.hoverDownloadButton&&(hasContent=!0,html+='<button tabindex="-1" type="button" is="paper-icon-button-light" class="paper-icon-button-light '+btnCssClass+' cardOverlayFab-primary" data-action="custom"><i class="md-icon cardOverlayButtonIcon">download</i></button>');html+='<div class="cardOverlayButton-br">';var userData=item.UserData||{};!1!==options.playedButton&&_itemhelper.default.canMarkPlayed(item)&&"CollectionFolder"!==itemType&&(hasContent=!0,html+=_embyPlaystatebutton.default.getHtml(userData.Played,btnCssClass,"cardOverlayButtonIcon cardOverlayButtonIcon-hover"));!1!==options.ratingButton&&_itemhelper.default.canRate(item)&&(hasContent=!0,html+=_embyRatingbutton.default.getHtml(userData.IsFavorite,btnCssClass,"cardOverlayButtonIcon cardOverlayButtonIcon-hover"));options.contextMenu&&_itemcontextmenu.default.supportsContextMenu(item)&&(hasContent=!0,html+='<button tabindex="-1" type="button" title="'+options.moreTitle+'" aria-label="'+options.moreTitle+'" is="paper-icon-button-light" class="paper-icon-button-light '+btnCssClass+' md-icon cardOverlayButtonIcon cardOverlayButtonIcon-hover" data-action="menu">&#xE5D3;</button>');options.previewImageButton&&supportsTargetBlank&&(hasContent=!0,html+='<a href="'+item.OriginalImageUrl+'" target="_blank" tabindex="-1" type="button" title="'+_globalize.default.translate("HeaderOpenInNewWindow")+'" aria-label="'+_globalize.default.translate("HeaderOpenInNewWindow")+'" is="emby-linkbutton" class="paper-icon-button-light '+btnCssClass+' md-icon cardOverlayButtonIcon cardOverlayButtonIcon-hover" data-action="openlink">open_in_new</a>');return hasContent?(html+="</div>",html+="</div>"):""}(item,action,options,cardScalableClass+" "+options.cardPadderClass),options.dragReorder&&(additionalCardContent+='<i title="'+_globalize.default.translate("DragDropToReorder")+'" class="md-icon cardIndicator cardIndicatorIcon cardIndicatorIcon-dragHandle dragHandle">&#xE25D;</i>'),options.cardParts){var attributes=_shortcuts.default.getShortcutAttributes(item,options);return options.isSingleClickElement&&attributes.push({name:"data-action",value:action}),options.isVirtualList||attributes.push({name:"data-index",value:index}),options.sideFooter?cardImageContainerClose+=innerCardFooter:cardImageContainerClose=innerCardFooter+cardImageContainerClose,{attributes:attributes,html:cardImageContainerOpen+cardImageContainerClose+additionalCardContent+outerCardFooter+"</div>"}}var dataAttributes=_shortcuts.default.getShortcutAttributesHtml(item,options);options.isSingleClickElement&&(dataAttributes+=' data-action="'+action+'"'),options.isVirtualList||(dataAttributes+=' data-index="'+index+'"');var tagName=options.tagName;options.sideFooter?cardImageContainerClose+=innerCardFooter:cardImageContainerClose=innerCardFooter+cardImageContainerClose;var fixedAttributes=options.fixedAttributes;return fixedAttributes&&(dataAttributes+=" "+fixedAttributes),"<"+tagName+dataAttributes+' class="'+options.className+'">'+cardImageContainerOpen+cardImageContainerClose+additionalCardContent+outerCardFooter+"</div></"+tagName+">"}var supportsTargetBlank=_servicelocator.appHost.supports("targetblank");var defaultIconsByItemType={MusicAlbum:"&#xE019;",MusicArtist:"&#xE7FD;",Person:"&#xE7FD;",Channel:"&#xE2C7;",Device:"&#xe1b1;",User:"&#xe7fd;",Server:"&#xE63E;",SelectServer:"&#xE63E;",ManualLogin:"&#xe898;",Downloads:"folder",CollectionFolder:"folder",UserView:"folder",ForgotPassword:"&#xe887;",AddServer:"&#xe147;",AddVirtualFolder:"&#xe147;",ActivityLogEntry:"&#xE878;",Log:"description",ApiKey:"vpn_key",Tag:"&#xe892;",ItemImage:"image",PluginCatalogItem:"extension",TvChannel:"live_tv",ChannelManagementInfo:"live_tv",LiveTVTunerDevice:"live_tv",LiveTVGuideSource:"dvr"},defaultIconsByCollectionType={movies:"&#xE54D;",music:"&#xE310;",audiobooks:"&#xE310;",homevideos:"&#xE412;",photos:"&#xE412;",livetv:"&#xe1b2;",tvshows:"&#xE333;",games:"&#xe30f;",trailers:"&#xE54D;",musicvideos:"&#xE04A;",books:"&#xE2C7;",channels:"&#xE2C7;",playlists:"&#xe8ef;",boxsets:"&#xf1c8;"},defaultIconsByStreamType={Audio:"audiotrack",Video:"videocam",Subtitle:"closed_caption",EmbeddedImage:"&#xE412;"},defaultIconsByMediaType={Video:"&#xE54D;",Audio:"&#xE019;",Photo:"&#xE412;",Book:"&#xE2C7;",Game:"&#xe30f;"};function getDefaultIcon(item,options){var icon,collectionType=item.CollectionType;if(collectionType&&(icon=defaultIconsByCollectionType[collectionType]))return icon;var itemType=item.Type;if(itemType&&(icon=defaultIconsByItemType[itemType]))return icon;var streamType=item.StreamType;if(streamType&&(icon=defaultIconsByStreamType[streamType]))return icon;if(options){var defaultIcon=options.defaultIcon;if(!1===defaultIcon)return null;if("string"==typeof defaultIcon)return defaultIcon}var mediaType=item.MediaType;return mediaType&&(icon=defaultIconsByMediaType[mediaType])?icon:"&#xE2C7;"}var _default={setListOptions:setListOptions,getCardsHtml:getCardsHtml,getItemsHtml:getCardsHtml,getItemParts:function(item,index,options){return options.cardParts=!0,getCardHtml(item,index,options)},buildCards:function(items,options){var itemsContainer=options.itemsContainer;if(document.body.contains(itemsContainer)){var parentContainer=options.parentContainer;if(parentContainer){if(!items.length)return void parentContainer.classList.add("hide");parentContainer.classList.remove("hide")}var html=buildCardsHtmlInternal(items,options);itemsContainer.innerHTML=html,itemsContainer.items=items,options.multiSelect&&(itemsContainer.enableMultiSelect?itemsContainer.enableMultiSelect(!0):itemsContainer.setAttribute("data-multiselect","true")),options.contextMenu&&(itemsContainer.enableContextMenu?itemsContainer.enableContextMenu(!0):itemsContainer.setAttribute("data-contextmenu","true")),html&&_imageloader.default.lazyChildren(itemsContainer),options.autoFocus&&_focusmanager.default.autoFocus(itemsContainer)}},getDefaultIcon:getDefaultIcon,getImageUrl:getImageUrl};_exports.default=_default});