var requirejs,require,define;!function(undef){"use strict";var queue=[],urlRegExp=/^\/|\:|\?|\.js$/;function reject(d,err){d.finished=!0,d.rejected=!0,d.reject(err)}function splitPrefix(name){var prefix,index=name?name.indexOf("!"):-1;return-1<index&&(prefix=name.substring(0,index),name=name.substring(index+1,name.length)),[prefix,name]}function makeErrback(d){return function(err){d.rejected||reject(d,err)}}var req,load,defined=Object.create(null),waiting=Object.create(null),config={baseUrl:"./",config:{}},mapCache=Object.create(null),deferreds=Object.create(null),calledDefine=Object.create(null),calledPlugin=Object.create(null),loadCount=0,urlFetched=Object.create(null);function addUrlArgs(url){var args=config.urlArgs;return args?url+(-1===url.indexOf("?")?"?":"&")+args:url}var plugins={css:{load:function(cssId,load){if(config.noRequireCss)load();else{var srch="/require/requirecss",index=cssId.indexOf(srch);-1!==index&&(cssId="css"+cssId.substring(index+srch.length));var url=cssId+".css";url.includes("://")||(url=config.baseUrl+url);var linkUrl=addUrlArgs(url),link=document.createElement("link");link.setAttribute("rel","stylesheet"),link.setAttribute("type","text/css"),link.onload=load,link.setAttribute("href",linkUrl);try{document.head.appendChild(link)}catch(err){console.log("Error loading stylesheet"),load()}}},normalize:function(name){return".css"===name.substr(name.length-4,4)&&(name=name.substr(0,name.length-4)),name}},text:{load:function(url,load){url.includes("://")||(url=config.baseUrl+url),url=addUrlArgs(url);var xhr=new XMLHttpRequest;xhr.open("GET",url,!0),xhr.onload=function(e){load(this.response)},xhr.send()}}};function normalize(name,baseName){var baseParts;return name&&("."!==(name=name.split("/"))[0].charAt(0)||(baseParts=baseName&&baseName.split("/"))&&(name=baseParts.slice(0,baseParts.length-1).concat(name)),function(ary){for(var part,length=ary.length,i=0;i<length;i++)if("."===(part=ary[i]))ary.splice(i,1),--i;else if(".."===part){if(0===i||1===i&&".."===ary[2]||".."===ary[i-1])continue;0<i&&(ary.splice(i-1,2),i-=2)}}(name),name=name.join("/")),name}function takeQueue(anonId){for(var id,args,i=0;i<queue.length;i+=1){if("string"!=typeof queue[i][0]){if(!anonId)break;queue[i].unshift(anonId),anonId=undef}--i,(id=(args=queue.shift())[0])in defined||id in waiting||(id in deferreds?main.apply(undef,args):waiting[id]=args)}anonId&&main(anonId,[])}function defaultCallback(){return Array.prototype.slice.call(arguments,0)}function makeRequire(relName){return function(deps,callback){return callback=callback||defaultCallback,takeQueue(),main(undef,deps||[],callback,relName)}}function resolve(name,d,value){name&&(defined[name]=value),d.finished=!0,d.resolve(value)}function defineModule(d){var ret,name=d.map.id;try{ret=d.factory.apply(defined[name],d.values)}catch(err){return reject(d,err),0}name&&ret===undef&&d.usingExports&&(ret=defined[name]),resolve(name,d,ret)}function Defer(name,calculatedMap){var d=this;d.promise=new Promise(function(resolve,reject){d.resolve=resolve,d.reject=reject}),d.map=name?calculatedMap||makeMap(name):{},d.depCount=0,d.depMax=0,d.values=[],d.depDefined=[]}function getDefer(name,calculatedMap){var d=name?(d=deferreds[name])||(deferreds[name]=new Defer(name,calculatedMap)):new Defer;return d}function waitForDep(depMap,relName,d,i){d.depMax+=1,function(map){var args,name=map.id;if(name in waiting)args=waiting[name],delete waiting[name],main.apply(undef,args);else if(!(name in deferreds)){if(map.pr){var plugin=plugins[map.pr],newId=map.id;return newId in calledPlugin||(calledPlugin[newId]=!0,plugin.load(map.n,function(id){return function(value){resolve(id,getDefer(id),value)}}(map.id))),getDefer(newId).promise}load(map)}return getDefer(name).promise}(depMap).then(function(val){d.depFinished(val,i)},makeErrback(d,depMap.id)).catch(makeErrback(d,d.map.id))}function makeMap(name,relName){if("string"!=typeof name)return name;var plugin,url,result,cacheKey=name+" & "+(relName||""),parts=splitPrefix(name),prefix=parts[0];if(name=parts[1],prefix)(plugin=plugins[prefix])&&(plugin.normalize&&(name=plugin.normalize(name)),name=normalize(name,relName));else{var cachedMap=mapCache[cacheKey];if(cachedMap)return cachedMap;prefix=(parts=splitPrefix(name=normalize(name,relName)))[0],url=function(moduleName){var url=moduleName;return urlRegExp.test(moduleName)||(url=("/"===(url+=".js").charAt(0)||url.match(/^[\w\+\.\-]+:/)?"":config.baseUrl)+url),addUrlArgs(url)}(name=parts[1])}return result={id:prefix?prefix+"!"+name:name,n:name,pr:prefix,url:url},prefix||(mapCache[cacheKey]=result),result}Defer.prototype.depFinished=function(val,i){this.rejected||this.depDefined[i]||(this.depDefined[i]=!0,this.depCount+=1,this.values[i]=val,this.depending||this.depCount!==this.depMax||defineModule(this))},load="function"==typeof importScripts?function(map){var url=map.url;urlFetched[url]||(urlFetched[url]=!0,getDefer(map.id),function(url){var urls=[];-1===url.indexOf("://")?(urls.push(config.baseUrl+url),urls.push(config.baseUrl+"modules/emby-apiclient/"+url),urls.push(config.baseUrl+"modules/sync/"+url),urls.push(config.baseUrl+"modules/localdatabase/"+url),urls.push(config.baseUrl+"modules/common/"+url),urls.push(config.baseUrl+"modules/"+url)):urls.push(url);for(var i=0,length=urls.length;i<length;i++){console.log("importScripts: "+urls[i]);try{return importScripts(urls[i])}catch(err){console.log("importScripts error: "+urls[i])}}throw new Error("importScripts failed for: "+url)}(url),takeQueue(map.id))}:function(map){var id,script,url=map.url;urlFetched[url]||(urlFetched[url]=!0,id=map.id,(script=document.createElement("script")).type="text/javascript",script.charset="utf-8",script.async=!0,loadCount+=1,script.addEventListener("load",function(){--loadCount,takeQueue(id)},!1),script.addEventListener("error",function(){--loadCount;var err=new Error("Load failed: "+id+": "+script.src);reject(getDefer(id),err)},!1),script.src=url,document.head.appendChild(script))};var handlers={require:makeRequire,exports:function(name){var e=defined[name];return void 0!==e?e:defined[name]={}}};function check(d){0===loadCount&&d&&(d.finished||!function breakCycle(d,traced,processed){var id=d.map.id;traced[id]=!0,!d.finished&&d.deps&&d.deps.forEach(function(depMap){var depId=depMap.id,dep=getDefer(depId,depMap);!dep||dep.finished||processed[depId]||(traced.hasOwnProperty(depId)?d.deps.forEach(function(depMap,i){depMap.id===depId&&d.depFinished(defined[depId],i)}):breakCycle(dep,traced,processed))}),processed[id]=!0}(d,{},{}))}function main(name,deps,factory,relName){if(name){if(name in calledDefine)return;calledDefine[name]=!0}var d=getDefer(name);if(deps&&!Array.isArray(deps)&&(factory=deps,deps=[]),deps=deps?Array.prototype.slice.call(deps,0):null,relName=relName||name,"function"==typeof factory){!deps.length&&factory.length&&(deps=(1===factory.length?["require"]:["require","exports","module"]).concat(deps)),d.factory=factory,d.deps=deps,d.depending=!0;for(var i=0,length=deps.length;i<length;i++){var depMap,depName=deps[i];deps[i]=depMap=makeMap(depName,relName),"require"===(depName=depMap.id)?d.values[i]=handlers.require(name):"exports"===depName?(d.values[i]=handlers.exports(name),d.usingExports=!0):void 0===depName?d.values[i]=void 0:waitForDep(depMap,0,d,i)}d.depending=!1,d.depCount===d.depMax&&defineModule(d)}else name&&resolve(name,d,factory);return name||check(d),d.promise}(req=makeRequire(null)).config=function(cfg){return cfg.baseUrl&&"/"!==cfg.baseUrl.charAt(cfg.baseUrl.length-1)&&(cfg.baseUrl+="/"),cfg.urlArgs&&(config.urlArgs=cfg.urlArgs),cfg.baseUrl&&(config.baseUrl=cfg.baseUrl),req},requirejs=req,"function"!=typeof require&&(require=requirejs),(define=function(){queue.push(Array.prototype.slice.call(arguments,0))}).amd={}}();