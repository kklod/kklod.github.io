define(["exports","./browser.js","./emby-apiclient/events.js","./common/appsettings.js"],function(_exports,_browser,_events,_appsettings){var currentLayout;function setLayout(instance,layout,selectedLayout){layout===selectedLayout?(instance[layout]=!0,"tv"===layout&&document.documentElement.classList.add("layout-"+layout)):(instance[layout]=!1,"tv"===layout&&document.documentElement.classList.remove("layout-"+layout))}function LayoutManager(){}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_browser=babelHelpers.interopRequireDefault(_browser),_events=babelHelpers.interopRequireDefault(_events),_appsettings=babelHelpers.interopRequireDefault(_appsettings),LayoutManager.prototype.setLayout=function(layout,save){var changed;layout&&"auto"!==layout?(setLayout(this,"mobile",layout),setLayout(this,"tv",layout),setLayout(this,"desktop",layout),!1!==save&&_appsettings.default.set("layout",layout),changed=currentLayout!==layout,currentLayout=layout,changed&&_events.default.trigger(this,"modechange")):(this.autoLayout(),!1!==save&&_appsettings.default.set("layout",""))},LayoutManager.prototype.getSavedLayout=function(layout){return _appsettings.default.get("layout")},LayoutManager.prototype.autoLayout=function(){this.setLayout(this.getDefaultLayout(),!1)},LayoutManager.prototype.getDefaultLayout=function(){if(this.getPlatformDefaultLayout){var result=this.getPlatformDefaultLayout();if(result)return result}if(_browser.default.xboxOne||_browser.default.ps4||_browser.default.chromecast||_browser.default.netcast||_browser.default.operaTv)return"tv";var userAgentData=navigator.userAgentData;return(!userAgentData||!userAgentData.mobile)&&(_browser.default.tv||!function(){try{if(window.matchMedia("(pointer: coarse)").matches)return 1;if(window.matchMedia("(pointer: fine)").matches)return;if(window.matchMedia("(pointer: none)").matches)return}catch(err){console.log("error using window.matchMedia")}}()&&(_browser.default.electron||window.location.href.toString().toLowerCase().includes("tv.emby")))?"tv":"mobile"},LayoutManager.prototype.init=function(){var saved=this.getSavedLayout();saved?this.setLayout(saved,!1):this.autoLayout()};var _default=new LayoutManager;_exports.default=_default});