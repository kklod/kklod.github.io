define(["cardBuilder","focusManager","appRouter","globalize","connectionManager","emby-itemscontainer"],function(cardBuilder,focusManager,appRouter,globalize,connectionManager){"use strict";return function(element,apiClient,parentId){this.apiClient=apiClient,this.parentId=parentId,this.categoryItemsContainer=element.querySelector(".categoryItemsContainer"),this.categoryItemsContainer.fetchData=function(){var apiClient=this.apiClient,parentId=this.parentId,items=[];return items.push({Name:globalize.translate("Albums"),Id:"music_albums",ServerId:apiClient.serverId(),ParentId:parentId,Icon:cardBuilder.getDefaultIcon({Type:"MusicAlbum"}),IsCategory:!0}),items.push({Name:globalize.translate("Artists"),Id:"music_albumartists",ServerId:apiClient.serverId(),ParentId:parentId,Icon:cardBuilder.getDefaultIcon({Type:"MusicArtist"}),IsCategory:!0}),items.push({Name:globalize.translate("Genres"),Id:"music_genres",ServerId:apiClient.serverId(),ParentId:parentId,Icon:cardBuilder.getDefaultIcon({Type:"MusicGenre"}),IsCategory:!0}),Promise.resolve({Items:items,TotalRecordCount:items.length})}.bind(this),this.categoryItemsContainer.getListOptions=function(){return{renderer:cardBuilder,options:{shape:"square",multiSelect:!1,contextMenu:!1,overlayText:!0,fields:["Name"],action:"custom"},virtualScrollLayout:"vertical-grid"}}.bind(this),this.categoryItemsContainer.addEventListener("action-null",function(e){var item=e.detail.item,url="/music?serverId="+connectionManager.getApiClient(item).serverId()+"&parentId="+item.ParentId,idParts=item.Id.split("_");1<idParts.length&&(url+="&tab="+idParts[1]),appRouter.show(url)}.bind(this)),this.resume=function(options){return Promise.all([this.categoryItemsContainer.resume(options).then(function(){return options.autoFocus&&focusManager.autoFocus(element),Promise.resolve()}),function(apiClient,element,parentId){var options={IncludeItemTypes:"Audio",Limit:9,Fields:"PrimaryImageAspectRatio,ProductionYear,CommunityRating",ParentId:parentId,ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Thumb,Logo"};return apiClient.getLatestItems(options).then(function(result){var section=element.querySelector(".latestSection");cardBuilder.buildCards(result,{parentContainer:section,itemsContainer:section.querySelector(".itemsContainer"),shape:"auto",rows:{portrait:2,square:3,backdrop:3,fourThree:3},scalable:!1,multiSelect:!1})})}(apiClient,element,parentId),function(apiClient,element,parentId){var options={SortBy:"SortName",SortOrder:"Ascending",IncludeItemTypes:"Playlist",Recursive:!0,ParentId:parentId,Fields:"PrimaryImageAspectRatio,SortName,CumulativeRunTimeTicks,CanDelete",StartIndex:0,Limit:9,ImageTypeLimit:1};return apiClient.getItems(apiClient.getCurrentUserId(),options).then(function(result){var section=element.querySelector(".playlistsSection");cardBuilder.buildCards(result.Items,{parentContainer:section,itemsContainer:section.querySelector(".itemsContainer"),shape:"auto",fields:[],overlayText:!0,rows:{portrait:2,square:3,backdrop:3,fourThree:3},scalable:!1,multiSelect:!1})})}(apiClient,element,parentId),function(apiClient,element,parentId){var options={SortBy:"DatePlayed",SortOrder:"Descending",IncludeItemTypes:"Audio",Limit:6,Recursive:!0,Fields:"PrimaryImageAspectRatio,ProductionYear,CommunityRating",Filters:"IsPlayed",ParentId:parentId,ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Thumb,Logo"};return apiClient.getItems(apiClient.getCurrentUserId(),options).then(function(result){var section=element.querySelector(".recentlyPlayedSection");cardBuilder.buildCards(result.Items,{parentContainer:section,itemsContainer:section.querySelector(".itemsContainer"),shape:"auto",action:"instantmix",rows:{portrait:2,square:3,backdrop:3,fourThree:3},scalable:!1,multiSelect:!1})})}(apiClient,element,parentId),function(apiClient,element,parentId){var options={SortBy:"PlayCount",SortOrder:"Descending",IncludeItemTypes:"Audio",Limit:6,Recursive:!0,Fields:"PrimaryImageAspectRatio",Filters:"IsPlayed",ParentId:parentId,ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Thumb,Logo"};return apiClient.getItems(apiClient.getCurrentUserId(),options).then(function(result){var section=element.querySelector(".frequentlyPlayedSection");cardBuilder.buildCards(result.Items,{parentContainer:section,itemsContainer:section.querySelector(".itemsContainer"),shape:"auto",action:"instantmix",rows:{portrait:2,square:3,backdrop:3,fourThree:3},scalable:!1,multiSelect:!1})})}(apiClient,element,parentId),function(apiClient,element,parentId){var options={SortBy:"Random",IncludeItemTypes:"Audio",Limit:6,Recursive:!0,Fields:"PrimaryImageAspectRatio,ProductionYear,CommunityRating",Filters:"IsFavorite",ParentId:parentId,ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Thumb,Logo"};return apiClient.getItems(apiClient.getCurrentUserId(),options).then(function(result){var section=element.querySelector(".favoriteSongsSection");cardBuilder.buildCards(result.Items,{parentContainer:section,itemsContainer:section.querySelector(".itemsContainer"),shape:"auto",action:"instantmix",rows:{portrait:2,square:3,backdrop:3,fourThree:3},scalable:!1,multiSelect:!1})})}(apiClient,element,parentId),function(apiClient,element,parentId){var options={SortBy:"Random",IncludeItemTypes:"MusicAlbum",Limit:6,Recursive:!0,Fields:"PrimaryImageAspectRatio,ProductionYear,CommunityRating",Filters:"IsFavorite",ParentId:parentId,ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Thumb,Logo"};return apiClient.getItems(apiClient.getCurrentUserId(),options).then(function(result){var section=element.querySelector(".favoriteAlbumsSection");cardBuilder.buildCards(result.Items,{parentContainer:section,itemsContainer:section.querySelector(".itemsContainer"),shape:"auto",rows:{portrait:2,square:3,backdrop:3,fourThree:3},scalable:!1,multiSelect:!1})})}(apiClient,element,parentId),function(apiClient,element,parentId){var options={SortBy:"Random",Limit:6,Recursive:!0,Fields:"PrimaryImageAspectRatio,ProductionYear,CommunityRating",Filters:"IsFavorite",ParentId:parentId,ImageTypeLimit:1,EnableImageTypes:"Primary,Backdrop,Thumb,Logo"};return apiClient.getArtists(apiClient.getCurrentUserId(),options).then(function(result){var section=element.querySelector(".favoriteArtistsSection");cardBuilder.buildCards(result.Items,{parentContainer:section,itemsContainer:section.querySelector(".itemsContainer"),shape:"auto",rows:{portrait:2,square:3,backdrop:3,fourThree:3},scalable:!1,multiSelect:!1})})}(apiClient,element,parentId)])},this.pause=function(){this.categoryItemsContainer.pause()},this.destroy=function(){this.apiClient=null,this.parentId=null,this.categoryItemsContainer=null}}});