define(["exports","./basetab.js","./../modules/cardbuilder/cardbuilder.js","./../modules/common/usersettings/usersettings.js","./../modules/common/globalize.js","./../modules/layoutmanager.js"],function(_exports,_basetab,_cardbuilder,_usersettings,_globalize,_layoutmanager){function OnNowTab(view){_basetab.default.apply(this,arguments)}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_basetab=babelHelpers.interopRequireDefault(_basetab),_cardbuilder=babelHelpers.interopRequireDefault(_cardbuilder),_usersettings=babelHelpers.interopRequireDefault(_usersettings),_globalize=babelHelpers.interopRequireDefault(_globalize),_layoutmanager=babelHelpers.interopRequireDefault(_layoutmanager),Object.assign(OnNowTab.prototype,_basetab.default.prototype),OnNowTab.prototype.loadTemplate=function(){var view=this.view;return view.innerHTML='\n                    <div is="emby-scroller" data-mousewheel="false" data-centerfocus="true" class="padded-top-focusscale padded-bottom-focusscale">\n                        <div is="emby-itemscontainer" class="scrollSlider itemsContainer videoosd-padded-left videoosd-padded-right" data-refreshinterval="300000" data-virtualscrolllayout="horizontal-grid"></div>\n                    </div>\n',this.itemsContainer=view.querySelector(".itemsContainer"),this.itemsContainer.fetchData=function(query){var apiClient=this.apiClient;return query=Object.assign({UserId:apiClient.getCurrentUserId(),IsAiring:!0,ImageTypeLimit:1,EnableImageTypes:"Primary,Thumb,Backdrop",Fields:"ProgramPrimaryImageAspectRatio",EnableUserData:!1,SortBy:"ChannelNumber,SortName"},query),_usersettings.default.addLiveTvChannelSortingToQuery(query,_globalize.default),apiClient.getLiveTvChannels(query)}.bind(this),this.itemsContainer.getListOptions=function(items){var options={preferThumb:"auto",inheritThumb:!1,shape:_layoutmanager.default.tv?"backdrop":"auto",centerText:!0,overlayText:!1,lazy:!0,overlayPlayButton:!0,contextMenu:!1,multiSelect:!1,programsAsSeries:!1,showCurrentProgramImage:!0,defaultShape:"play",action:"programlink",cardClass:"videoOsd-itemstab-card videoOsd-itemstab-card-threeline",fields:["CurrentProgramName","CurrentProgramParentName","CurrentProgramTime"],allowBottomPadding:!1,defaultBackground:!0};return items.length&&items[0].AsSeries&&(options.progress=!1,options.showAirTime=!1,options.showAirDateTime=!1,options.showParentTitle=!1,options.fields.push("ParentNameOrName")),{renderer:_cardbuilder.default,options:options,virtualScrollLayout:"horizontal-grid"}}.bind(this),Promise.resolve()},OnNowTab.prototype.onResume=function(options){var instance=this;return _basetab.default.prototype.onResume.apply(this,arguments).then(function(){return instance.itemsContainer.resume(options)})},OnNowTab.prototype.onPause=function(){_basetab.default.prototype.onPause.apply(this,arguments),this.itemsContainer.pause()},OnNowTab.prototype.destroy=function(){_basetab.default.prototype.destroy.apply(this,arguments),this.itemsContainer=null},_exports.default=OnNowTab});